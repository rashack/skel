#!/bin/bash

DZEN_FONT="-misc-fixed-medium-r-semicondensed-*-13-120-75-75-c-60-iso8859-*"
DZEN_TIMEBAR_WIDTH=240
DATEFMT="Day wNN YYYY-mm-dd HH:MM:SS   "

textwidth () {
    case $(hostname) in
	baboon)
	    echo $(( ${#1} * 8 ))
	    ;;
	*)
	    dzen2-textwidth $DZEN_FONT $1
	    ;;
    esac
}

case $(hostname) in
    pringle)
	DZEN_TIMEBAR_WIDTH=$(textwidth $DATEFMT)
	SCREEN_WIDTH=1920
	DZEN_STATUS_WIDTH=1320
	CONKY_IF=eth0
	DZEN_OPTS="$DZEN_OPTS -xs 1"
	;;
    chimp)
	SCREEN_WIDTH=2560
	DZEN_STATUS_WIDTH=1920
	CONKY_IF=eth1
	DZEN_FONT="-*-terminus-*-r-normal-*-*-120-*-*-*-*-iso8859-*"
	DZEN_OPTS="$DZEN_OPTS -xs 0"
	;;
    tp)
	SCREEN_WIDTH=1280
	DZEN_STATUS_WIDTH=650
	CONKY_IF=wlan0
	DZEN_FONT="-*-terminus-*-r-normal-*-*-120-*-*-*-*-iso8859-*"
	CONKY_EXTRA=' | bat: ${battery_short}'
	DZEN_OPTS="$DZEN_OPTS -xs 1"
	;;
    baboon)
	DZEN_TIMEBAR_WIDTH=$(textwidth "$DATEFMT")
	echo width=$DZEN_TIMEBAR_WIDTH
	SCREEN_WIDTH=1366
	DZEN_STATUS_WIDTH=650
	CONKY_IF=wlan0
	DZEN_FONT="-*-terminus-*-r-normal-*-*-120-*-*-*-*-iso8859-*"
	CONKY_EXTRA=' | bat: ${battery_short}'
	DZEN_OPTS="$DZEN_OPTS -xs 1"
	;;
esac

DZEN_IDLE_X=$DZEN_TIMEBAR_WIDTH
DZEN_IDLE_WIDTH=$(textwidth "[SSSSS]")
DZEN_STATUS_X=$(( $DZEN_IDLE_X + $DZEN_IDLE_WIDTH ))
DZEN_LOAD_X=$(( $DZEN_STATUS_X + $DZEN_STATUS_WIDTH ))
DZEN_LOAD_WIDTH=$(( $SCREEN_WIDTH - $DZEN_STATUS_X - $DZEN_STATUS_WIDTH ))
DZEN_OPTS="-fn $DZEN_FONT -bg #044084"

export DZEN_FONT
export DZEN_OPTS
export DZEN_TIMEBAR_WIDTH
export DZEN_IDLE_X
export DZEN_IDLE_WIDTH
export DZEN_STATUS_X
export DZEN_STATUS_WIDTH
export DZEN_LOAD_X
export DZEN_LOAD_WIDTH
export CONKY_IF
export CONKY_EXTRA

# echo "DZEN_TIMEBAR_WIDTH $DZEN_TIMEBAR_WIDTH"
# echo "DZEN_IDLE_X $DZEN_IDLE_X"
# echo "DZEN_IDLE_WIDTH $DZEN_IDLE_WIDTH"
# echo "DZEN_STATUS_X $DZEN_STATUS_X"
# echo "DZEN_STATUS_WIDTH $DZEN_STATUS_WIDTH"
# echo "DZEN_LOAD_X $DZEN_LOAD_X"
# echo "DZEN_LOAD_WIDTH $DZEN_LOAD_WIDTH"
